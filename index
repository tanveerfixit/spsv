<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SPSV Prep - Flashcards</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Lucide Icons CDN -->
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        .perspective-1000 { perspective: 1000px; }
        .backface-hidden { backface-visibility: hidden; }
        .transform-style-3d { transform-style: preserve-3d; }
        .rotate-y-180 { transform: rotateY(180deg); }
        .card-inner { transition: transform 0.6s cubic-bezier(0.4, 0, 0.2, 1); }
    </style>
</head>
<body class="bg-slate-50 text-slate-900 font-sans selection:bg-blue-100 pb-12">

    <!-- Header -->
    <header class="bg-white border-b sticky top-0 z-10 px-4 py-3 flex items-center justify-between shadow-sm">
        <div class="flex items-center gap-2">
            <div class="bg-blue-600 p-1.5 rounded-lg text-white">
                <i data-lucide="book-open" class="w-5 h-5"></i>
            </div>
            <h1 class="font-bold text-lg tracking-tight">SPSV Prep</h1>
        </div>
        <div class="flex gap-2">
            <button onclick="shuffleDeck()" class="flex items-center gap-1.5 px-3 py-1.5 rounded-full bg-slate-100 hover:bg-slate-200 text-sm font-medium transition-colors">
                <i data-lucide="refresh-cw" class="w-3.5 h-3.5"></i>
                Shuffle
            </button>
        </div>
    </header>

    <main class="max-w-md mx-auto px-4 py-6">
        <!-- Progress Bar -->
        <div class="mb-6 space-y-2 bg-white p-4 rounded-2xl border border-slate-100 shadow-sm">
            <div class="flex justify-between text-xs font-bold text-slate-500 uppercase tracking-wider">
                <span id="mastery-text">Mastery: 0 / 0</span>
                <span id="progress-percent">0%</span>
            </div>
            <div class="w-full h-2.5 bg-slate-100 rounded-full overflow-hidden">
                <div id="progress-bar" class="h-full bg-green-500 transition-all duration-700 ease-out shadow-[0_0_8px_rgba(34,197,94,0.4)]" style="width: 0%"></div>
            </div>
        </div>

        <!-- Card Container -->
        <div class="relative h-96 perspective-1000">
            <div id="card-inner" class="card-inner relative w-full h-full transform-style-3d cursor-pointer" onclick="toggleFlip()">
                <!-- Front -->
                <div class="absolute inset-0 backface-hidden bg-white rounded-[2rem] p-8 flex flex-col items-center justify-center text-center shadow-xl border border-slate-100">
                    <div class="absolute top-6 flex justify-between w-full px-8">
                        <span id="card-index" class="text-xs font-bold text-slate-300 uppercase tracking-widest">Q 1</span>
                        <div id="mastery-indicator" class="hidden text-green-500">
                            <i data-lucide="check-circle-2" class="w-5 h-5"></i>
                        </div>
                    </div>
                    <p id="question-text" class="text-xl md:text-2xl font-semibold text-slate-800 leading-tight"></p>
                    <div class="mt-10 text-blue-500 text-sm font-bold flex items-center gap-2 px-4 py-2 bg-blue-50 rounded-full animate-pulse">
                        <i data-lucide="info" class="w-4 h-4"></i>
                        Tap to reveal answer
                    </div>
                </div>

                <!-- Back -->
                <div class="absolute inset-0 backface-hidden bg-blue-600 text-white rounded-[2rem] p-8 flex flex-col items-center justify-center text-center shadow-2xl rotate-y-180">
                    <span class="absolute top-6 left-8 text-xs font-bold text-blue-200 uppercase tracking-widest">Answer</span>
                    <p id="answer-text" class="text-xl md:text-2xl font-medium leading-relaxed"></p>
                    <div class="mt-10 text-blue-100 text-sm font-semibold opacity-80 border border-blue-400/30 px-4 py-2 rounded-full">
                        Tap to flip back
                    </div>
                </div>
            </div>
        </div>

        <!-- Controls -->
        <div class="mt-8 flex flex-col items-center gap-8">
            <div class="flex items-center gap-4 w-full justify-center">
                <button onclick="prevCard()" class="p-4 rounded-2xl bg-white shadow-lg hover:bg-slate-50 active:scale-90 transition-all text-slate-600 border border-slate-100">
                    <i data-lucide="chevron-left" class="w-8 h-8"></i>
                </button>
                
                <button id="mastery-btn" onclick="toggleMastered()" class="px-8 py-4 rounded-2xl flex items-center gap-3 font-bold shadow-lg transition-all active:scale-95 border bg-white text-slate-700 border-slate-200">
                    <i data-lucide="check-circle-2" class="w-6 h-6"></i>
                    <span id="btn-label">Mark Mastered</span>
                </button>

                <button onclick="nextCard()" class="p-4 rounded-2xl bg-white shadow-lg hover:bg-slate-50 active:scale-90 transition-all text-slate-600 border border-slate-100">
                    <i data-lucide="chevron-right" class="w-8 h-8"></i>
                </button>
            </div>

            <button onclick="resetProgress()" class="text-xs font-bold text-slate-400 hover:text-red-400 uppercase tracking-tighter transition-colors">
                Reset All Progress
            </button>
        </div>
    </main>

    <footer class="text-center mt-4">
        <p class="text-[10px] text-slate-400 px-8">
            No server required. Progress saved in your browser.
        </p>
    </footer>

    <script>
        // Data embedded directly
        const rawData = `What does the acronym SPSV stand for in the context of Irish public transport?,Small Public Service Vehicle.
"What is the maximum number of passengers an SPSV is permitted to carry, excluding the driver?",Up to eight passengers.
"Which statutory body, established in 2009, is the licensing authority for Small Public Service Vehicles in Ireland?",The National Transport Authority (NTA).
Name the six categories of vehicles included under the term SPSV.,"Taxis, wheelchair accessible taxis, hackneys, wheelchair accessible hackneys, local area hackneys, and limousines."
The _____ is an individual or organisation that provides a booking service for SPSV journeys delivered by someone else.,dispatch operator
What is a 'driver display card' used for in an SPSV?,It is an identification card that SPSV drivers must display in their vehicles as proof of their licence to provide SPSV services.
"A taxi is '_____ for hire' when it is available for hire in a public area, allowing a passenger to hail it when in motion or at a taxi rank.",plying
What is Tariff A in the context of taxi fares?,"It is the standard fare charge that applies after the initial charge, covering the next 14.5 km or 42 minutes of a journey."
What is the primary function of the Advisory Committee on Small Public Service Vehicles (Taxi Advisory Committee)?,To give correct guidance and advice to the NTA on issues that are important to SPSVs and their companies.
What are the three main areas of licensing in the SPSV industry?,"Driver licences, vehicle licences, and dispatch operator licences."
Which organisation is the licensing authority for SPSV drivers in Ireland?,An Garda Síochána.
A person with a standard SPSV driver licence is licensed to drive which categories of SPSV?,They are licensed to drive any category of SPSV.
"To get an SPSV on the road, a driver must have a valid SPSV driver licence, a licensed SPSV vehicle, a valid insurance certificate, a valid roadworthiness certificate, and ____.",tax clearance
What are the two modules of the SPSV Driver Entry Test for new applicants?,The Industry Knowledge Module and the Area Knowledge Module.
"By law, a small section of the national SPSV register is available to the public on which website?",www.transportforireland.ie.
Which organisation in the SPSV driver licensing process is responsible for managing applications and conducting background checks (vetting)?,An Garda Síochána.
What is the minimum driving licence class required to apply for an SPSV driver licence?,Class B or higher.
Applicants for which type of driver licence do not have to pass the SPSV Driver Entry Test?,Local area hackney driver licences.
What is the fee for a new SPSV Driver's Licence application?,€250.
Where must an SPSV driver licence applicant in Dublin submit their application?,To the Carriage Office.
What is the maximum time an SPSV driver licence application process can take to complete?,Up to 12 weeks.
"A driver convicted of certain serious crimes, such as murder or rape, can result in a _____ disqualification from holding an SPSV driver licence.",lifetime
What two types of ID cards does the NTA send to a driver once their licence is approved by An Garda Síochána?,A large driver display card for the dashboard and a small smart card to be carried at all times.
What must be displayed on a taxi's roof sign to indicate the county where the driver is licensed to work?,An area sticker with a one or two-letter code for the county.
A regular SPSV driver licence can be valid for a maximum of how many years?,Up to five years.
"If an SPSV driver's licence has been expired for more than 12 months, what is its status?","Timed out, meaning it cannot be renewed and a new application, including the test, is required."
Under what circumstances may an SPSV driver reasonably refuse to carry a passenger requesting a journey in a taxi?,If the requested journey is more than 30 km.
What is an SPSV driver's responsibility regarding guide dogs or assistance animals?,"They must accept and carry them for passengers who need them, at no extra charge."
What is the purpose of the 'SPSV Driver Check App' for passengers?,It allows passengers to check if a driver and vehicle are licensed and to verify the driver's identity.
What are the two main types of standards for SPSV vehicles?,Roadworthiness standards and SPSV specific suitability standards.
An NCT certificate for a vehicle must be issued no earlier than _____ days before its SPSV Vehicle Inspection.,90
"The NTA's _____ explains the detailed rules all SPSV vehicles must follow regarding age, size, comfort, and accessibility.",Initial Suitability Inspection Manual
What is the minimum luggage capacity required for an SPSV (taxi or hackney)?,420 litres.
What is the minimum percentage of visible light that must be let in by an SPSV's front windscreen and passenger side windows?,70%.
"If a Roman numeral 'V' is present next to the European approval number on a vehicle's window glass, what does this indicate for an SPSV inspection?",The glass is too dark and will not pass the Initial Suitability Inspection.
A wheelchair accessible vehicle must be certified by a qualified _____ to ensure it meets NTA standards.,Technical Assessor
A Technical Assessor's Full Report for a wheelchair accessible vehicle must be dated no more than _____ days before the Initial Suitability Inspection.,60
What is the maximum gross vehicle weight for limousines licensed after 1 January 2013?,"3,500 kilograms."
Can an SPSV vehicle licence be sold to another person?,"No, a vehicle licence cannot be sold; transfer is only possible upon the death of the licence holder to a nominated person."
"Currently, the NTA is only accepting new licence applications for which four categories of SPSV?","Wheelchair accessible taxis, wheelchair accessible hackneys, local area hackneys, and limousines."
A 'Conditional Offer' letter for an SPSV vehicle licence is valid for how many days?,90 days.
Name three of the six required safety and communication items that all SPSVs must carry.,"Any three of: fire extinguisher, first-aid kit, high-visibility vest, warning triangle, torch, pen and paper."
Which organisation must verify and seal a taximeter to ensure it meets legal requirements?,The Legal Metrology Service (part of the National Standards Authority of Ireland).
What information must be displayed on a regulation taxi roof sign?,"The word 'TAXI' or 'TACSAÍ', the vehicle licence number, and the relevant county sticker(s)."
When must the light in a taxi roof sign be on?,The light must be on when the taxi is available for hire.
A vehicle licence for a vehicle more than 10 years old is usually valid for what period?,Six months.
You can apply to renew an SPSV vehicle licence up to _____ days before it expires.,60
"If an SPSV vehicle licence expires, you have up to _____ from the expiry date to apply for a replacement.",24 months (two years)
"When changing the vehicle on your licence, what must you do with the tamper-proof licence discs from the old vehicle?",You must remove them and bring them to the Initial Suitability Inspection of the new vehicle.
What form must be filled out to nominate a person to take over an SPSV vehicle licence in the event of the licence holder's death?,Form S15N.
"What is the driver's responsibility concerning the vehicle they are driving, even if someone else owns it?",It is the driver’s responsibility to make sure the vehicle they are driving follows the rules.
What colour is the inside of a tamper-proof licence disc for a taxi?,Yellow.
What colour is the inside of a tamper-proof licence disc for a limousine?,Silver.
What colour is the inside of a tamper-proof licence disc for a hackney?,Blue.
It is the _____ responsibility to ensure the driver-to-vehicle link is always up to date with the NTA.,driver's
Are taxis permitted to use contra-flow bus lanes (where traffic travels in the opposite direction)?,"No, taxis are not allowed in contra-flow bus lanes."
Are hackneys and limousines allowed to use bus lanes?,"No, hackneys and limousines are not allowed to use bus lanes."
What must a taxi driver do with their roof sign when the vehicle is in a public area but not being operated as a taxi?,The roof sign must be removed.
The cashless payment device in a taxi must be linked to the _____ to allow for identification in transaction history.,"driver, not the vehicle"
Can a taxi driver apply a surcharge or extra fee for cashless payments?,"No, no surcharge or extra fee can be applied to cashless payments."
Who should be contacted if a passenger refuses to pay the fare and no agreement can be reached?,An Garda Síochána should be contacted.
Name one valid reason for an SPSV driver to refuse service to a passenger.,"Any one of: disorderly/abusive behaviour, consuming food/drink, risk of dirtying vehicle, excessive luggage, or exceeding passenger capacity."
What two organisations are involved in the SPSV driver licensing process?,An Garda Síochána and the National Transport Authority (NTA).
What must be displayed on a passenger door of a wheelchair accessible hackney?,The accessibility symbol.
Local area hackneys must only operate in the area listed on the ____.,licence
"Under section 24 of the Taxi Regulation Act 2013, it is an offence for a person to hire a taxi and refuse to pay a fare calculated by a verified _____.",taximeter
What does the term 'standing for hire' mean for a taxi?,"A taxi 'stands for hire' when it is stationary and available for hire in a public area, such as a taxi rank."
What is the initial fare charge on a taximeter intended to cover?,The first 500 meters of a journey or a period of 85 seconds.
A hackney or limousine driver must make a _____ receipt available to the customer at the end of the journey.,written
"If a vehicle is less than three months old and has travelled less than 3,000 kilometres, is an NCT required for SPSV licensing?","No, an NCT is not required in this case."
"To what internal temperature must an SPSV be able to maintain its passenger area, even if it is -5°C outside?",20° Celsius.
An SPSV driver must inform the NTA in writing of a change of address within how many days?,Within 21 days.`;

        let cards = [];
        let currentIndex = 0;
        let isFlipped = false;
        let mastered = new Set();

        function parseCSV(csv) {
            const matches = csv.match(/(".*?"|[^,]+)(?=\s*,|\s*$)/gm);
            const result = [];
            for (let i = 0; i < matches.length; i += 2) {
                if (matches[i] && matches[i+1]) {
                    result.push({
                        question: matches[i].replace(/^"|"$/g, '').trim(),
                        answer: matches[i+1].replace(/^"|"$/g, '').trim()
                    });
                }
            }
            return result;
        }

        function init() {
            cards = parseCSV(rawData);
            const saved = localStorage.getItem('spsv_mastery');
            if (saved) {
                mastered = new Set(JSON.parse(saved));
            }
            updateUI();
            lucide.createIcons();
        }

        function updateUI() {
            const current = cards[currentIndex];
            const qEl = document.getElementById('question-text');
            const aEl = document.getElementById('answer-text');
            const indexEl = document.getElementById('card-index');
            const masteryIndicator = document.getElementById('mastery-indicator');
            const masteryBtn = document.getElementById('mastery-btn');
            const btnLabel = document.getElementById('btn-label');
            const progressPercent = document.getElementById('progress-percent');
            const progressBar = document.getElementById('progress-bar');
            const masteryText = document.getElementById('mastery-text');

            qEl.innerText = current.question;
            aEl.innerText = current.answer;
            indexEl.innerText = `Q ${currentIndex + 1}`;

            const isMastered = mastered.has(current.question);
            
            // Mastery UI
            if (isMastered) {
                masteryIndicator.classList.remove('hidden');
                masteryBtn.className = "px-8 py-4 rounded-2xl flex items-center gap-3 font-bold shadow-lg transition-all active:scale-95 border bg-green-500 text-white border-green-600";
                btnLabel.innerText = "Mastered";
            } else {
                masteryIndicator.classList.add('hidden');
                masteryBtn.className = "px-8 py-4 rounded-2xl flex items-center gap-3 font-bold shadow-lg transition-all active:scale-95 border bg-white text-slate-700 border-slate-200 hover:border-blue-300";
                btnLabel.innerText = "Mark Mastered";
            }

            // Stats
            const total = cards.length;
            const count = mastered.size;
            const pct = Math.round((count / total) * 100);
            
            masteryText.innerText = `Mastery: ${count} / ${total}`;
            progressPercent.innerText = `${pct}%`;
            progressBar.style.width = `${pct}%`;
        }

        function toggleFlip() {
            isFlipped = !isFlipped;
            document.getElementById('card-inner').classList.toggle('rotate-y-180', isFlipped);
        }

        function nextCard() {
            resetFlip();
            setTimeout(() => {
                currentIndex = (currentIndex + 1) % cards.length;
                updateUI();
            }, 150);
        }

        function prevCard() {
            resetFlip();
            setTimeout(() => {
                currentIndex = (currentIndex - 1 + cards.length) % cards.length;
                updateUI();
            }, 150);
        }

        function resetFlip() {
            isFlipped = false;
            document.getElementById('card-inner').classList.remove('rotate-y-180');
        }

        function toggleMastered() {
            const currentQ = cards[currentIndex].question;
            if (mastered.has(currentQ)) {
                mastered.delete(currentQ);
            } else {
                mastered.add(currentQ);
            }
            localStorage.setItem('spsv_mastery', JSON.stringify([...mastered]));
            updateUI();
        }

        function shuffleDeck() {
            resetFlip();
            setTimeout(() => {
                cards.sort(() => Math.random() - 0.5);
                currentIndex = 0;
                updateUI();
            }, 150);
        }

        function resetProgress() {
            if (confirm("Reset all study progress?")) {
                mastered.clear();
                localStorage.removeItem('spsv_mastery');
                updateUI();
            }
        }

        // Swipe Support
        let touchstartX = 0;
        let touchendX = 0;

        document.addEventListener('touchstart', e => {
            touchstartX = e.changedTouches[0].screenX;
        });

        document.addEventListener('touchend', e => {
            touchendX = e.changedTouches[0].screenX;
            handleGesture();
        });

        function handleGesture() {
            if (touchendX < touchstartX - 50) nextCard();
            if (touchendX > touchstartX + 50) prevCard();
        }

        // Init on load
        window.onload = init;
    </script>
</body>
</html>
